<?xml version="1.0"?>
<mx:VBox xmlns:mx="http://www.adobe.com/2006/mxml"
         xmlns:flexlib="http://code.google.com/p/flexlib/"
         xmlns:controls="controls.*"
         xmlns:neosavvy="com.neosavvy.grid.*"
         xmlns:validators="com.visualempathy.validators.*"
          width="100%" height="100%">

    <mx:Script>
        <![CDATA[

        import mx.collections.ArrayCollection;
        import mx.events.CollectionEvent;

        [Bindable]
        private var _clientCompanies:ArrayCollection

        public function get clientCompanies():ArrayCollection {
            return _clientCompanies;
        }

        public function set clientCompanies(value:ArrayCollection):void {
            _clientCompanies = value;
            dispatchEvent(new CollectionEvent(CollectionEvent.COLLECTION_CHANGE));
        }



        ]]>
    </mx:Script>

    <mx:Array id="projectFormValidators">
        <mx:StringValidator id="projectNameValidator" source="{this.projectName}" property="text" required="true"/>
        <mx:StringValidator id="projectCodeValidator" source="{this.projectCode}" property="text" required="true"/>
    </mx:Array>
    <validators:FormValidator id="projectFormValidator" validators="{this.projectFormValidators}"/>

    <mx:HBox width="100%">
        <mx:Form id="projectEntryForm" width="50%">
            <mx:FormItem label="Project Name:" width="100%" required="true">
                <flexlib:PromptingTextInput id="projectName" prompt="Project Name"
                                            change="this.projectFormValidator.validateForm(event);"/>
            </mx:FormItem>
            <mx:FormItem label="Project Code:" width="100%" required="true">
                <flexlib:PromptingTextInput id="projectCode" prompt="Three Letter Code"
                                            change="this.projectFormValidator.validateForm(event);"/>
            </mx:FormItem>
            <mx:FormItem label="State Date:" width="100%" required="true">
                <mx:DateField id="startDate"/>
            </mx:FormItem>
            <mx:FormItem label="End Date:" width="100%" required="false">
                <mx:DateField id="endDate"/>
            </mx:FormItem>
            <mx:FormItem>
                <mx:CheckBox id="ongoingProject" label="No End Date (This Project is on-going)"/>
            </mx:FormItem>
        </mx:Form>
        <mx:VBox width="50%" height="{projectEntryForm.height}">
            <mx:ComboBox id="clientSelectorDropdown" labelField="companyName" width="60%"
                         prompt="Select Client Company..." dataProvider="{_clientCompanies}"/>

            <mx:HBox horizontalAlign="right" verticalAlign="bottom" height="100%" width="100%">
                <mx:Button id="saveProject" label="Save Project"/>
                <flexlib:PromptingTextInput id="searchTextInput" prompt="Search..."/>
                <mx:Button id="resetFilters" label="Reset Filters" click="projectManagementGrid.resetFilters()"/>
            </mx:HBox>
        </mx:VBox>
    </mx:HBox>

    <neosavvy:AutoFilteringGrid
            id="projectManagementGrid"
            width="100%"
            height="100%"
            autoResizeColumnHeaders="true"
            searchTextControl="{searchTextInput}"
            >
        <neosavvy:columns>
            <neosavvy:AutoFilteringGridColumn
                    id="projectNameColumn"
                    dataField="name"
                    headerText="Project Name"
                    autoFilterEnabled="true"
                    enabledByDefault="true"
                    />
            <neosavvy:AutoFilteringGridColumn
                    id="projectCodeColumn"
                    dataField="code"
                    headerText="Project Code"
                    autoFilterEnabled="true"
                    enabledByDefault="true"
                    />
            <neosavvy:AutoFilteringGridColumn
                    id="startDateColumn"
                    dataField="startDate"
                    headerText="Start Date"
                    autoFilterEnabled="true"
                    enabledByDefault="true"
                    />
            <neosavvy:AutoFilteringGridColumn
                    id="endDateColumn"
                    dataField="endDate"
                    headerText="End Date"
                    autoFilterEnabled="true"
                    enabledByDefault="true"
                    />
            <neosavvy:AutoFilteringGridColumn
                    id="clientCompanyColumn"
                    dataField="clientCompanyName"
                    headerText="Client Company"
                    autoFilterEnabled="true"
                    enabledByDefault="true"
                    />
        </neosavvy:columns>
    </neosavvy:AutoFilteringGrid>


</mx:VBox>
