<?xml version="1.0" encoding="utf-8"?>
<mx:Application 
	xmlns:mx="http://www.adobe.com/2006/mxml" 
	layout="vertical"
	creationComplete="{facade.startup(this)}" 
	xmlns:chart="com.neosavvy.svn.analytics.components.chart.*" 
	xmlns:grid="com.neosavvy.svn.analytics.components.grid.*"
	backgroundGradientAlphas="[1.0, 1.0]" 
	backgroundGradientColors="[#FFFFFF, #FFFFFF]" xmlns:repository="com.neosavvy.svn.analytics.components.repository.*">
	
	<mx:Script>
		<![CDATA[
			private var facade:ApplicationFacade = ApplicationFacade.getInstance();
			
			public static var REFINE_SEARCH:String = "refineSearch";
			public static var RESET_SEARCH:String = "resetSearch";
			public static var MANAGE_REPOSITORIES:String = "manageRepositories";
			
			private function refineSearch():void {
				dispatchEvent(new Event(REFINE_SEARCH));
			}
			
			private function resetSearch():void {
				dispatchEvent(new Event(RESET_SEARCH));
			}
			
			private function manageRepositories():void {
				dispatchEvent(new Event(MANAGE_REPOSITORIES));
			}
		]]>
	</mx:Script>
	
	<mx:Style source="com/neosavvy/svn/analytics/styles/ChartStyles.css"/>
	<mx:ApplicationControlBar dock="true">
		<mx:Button label="Refine Search" click="{refineSearch()}"/>
		<mx:Button label="Reset" click="{resetSearch()}"/>
		<mx:Button label="Manage Repositories" click="{manageRepositories()}"/>
	</mx:ApplicationControlBar>
	<mx:VDividedBox width="100%" height="100%">
		<mx:HDividedBox width="100%" borderStyle="none">
			<mx:VBox>
				<mx:Panel width="100%" height="25%" title="Welcome to SVN Spy">
					<mx:Text 
						width="350"
						height="100%"
						text="This tool is constantly archiving metadata gathered from repositories who have owners that have signed their repository up for analysis. So far minimal statistics are being generated and all files are being archived. Later more information will be archived so please check back as future updates are made. Please email me at aparrish@neosavvy.com if you have any ideas to help improve the usefulness of this tool."/>
				</mx:Panel>
				<mx:HBox>
					<mx:Panel title="Select the user(s) to analyze">
						<mx:List 
							id="authorsSelector" 
							labelField="author"
							selectionColor="0xA6A6A6"
							rollOverColor="0xD1D1D1"
							alternatingItemColors="[0xEBEBEB,0xFFFFFF]"
							allowMultipleSelection="true"
							width="175"/>
					</mx:Panel>
					<mx:Panel title="Choose your Repository">
						<mx:List
							id="svnRepositorySelector"
							labelField="name"
							selectionColor="0xA6a6a6"
							rollOverColor="0xD1D1D1"
							alternatingItemColors="[0xEBEBEB,0xFFFFFF]"
							allowMultipleSelection="true"
							width="175"/>
					</mx:Panel>
				</mx:HBox>
			</mx:VBox>	
			<chart:ChartContainer backgroundColor="0xFFFFFF" id="chartContainer" height="100%"/>
			<repository:RepositoryBrowser 
				id="repositoryBrowser" width="100%" height="100%" 
				horizontalScrollPolicy="on"
				/>
		</mx:HDividedBox>
		<grid:GridContainer id="gridContainer" width="100%" height="30%"/>	
	</mx:VDividedBox>
</mx:Application>
