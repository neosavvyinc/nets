<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="SvnRepositoryInterval">

    <typeAlias alias="SvnRepositoryInterval" 
    	type="com.neosavvy.svn.analytics.dto.SVNRepositoryInterval" />
    
    <resultMap class="SvnRepositoryInterval" id="SvnRepositoryIntervalResultMap">
		<result property="startMonthDate" column="START_DATE_MONTH"/>
		<result property="endMonthDate" column="END_DATE_MONTH"/>
		<result property="startDayLevelDate" column="START_DATE_DAY_LEVEL"/>
		<result property="endDayLevelDate" column="END_DATE_DAY_LEVEL"/>
    </resultMap>
    
    <select id="getSvnRepositoryInterval" resultMap="SvnRepositoryIntervalResultMap">
        SELECT 
		    MIN(REV_DATE) as START_DATE_DAY_LEVEL
		    ,MAX(REV_DATE) as END_DATE_DAY_LEVEL 
		    ,DATE_FORMAT(MIN(REV_DATE), '%Y-%m') as START_DATE_MONTH
		    ,DATE_FORMAT(MAX(REV_DATE), '%Y-%m') as END_DATE_MONTH
		FROM SVN_STATISTIC
    </select>

</sqlMap>